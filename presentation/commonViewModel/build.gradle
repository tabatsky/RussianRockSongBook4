plugins {
    id 'com.android.library'
    id 'kotlin-android'
    id 'kotlin-kapt'
    id 'com.google.dagger.hilt.android'
    id 'org.jetbrains.kotlin.plugin.compose'
    id 'com.google.devtools.ksp'
}

android {
    compileSdk 34

    defaultConfig {
        minSdk 21
        targetSdk 34

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
        consumerProguardFiles "consumer-rules.pro"
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }
    kotlinOptions {
        jvmTarget = '17'
    }
    buildFeatures {
        compose true
    }
    composeOptions {
        kotlinCompilerExtensionVersion versions.composeCompiler
    }
    namespace 'jatx.russianrocksongbook.commonviewmodel'
}

dependencies {

    implementation libs.coreKtx
    implementation libs.coroutines
    implementation libs.lifecycleRuntime
    implementation libs.lifecycleViewmodel

    implementation libs.hiltAndroid
    kapt libs.hiltCompiler
    implementation libs.hiltExtensions
    ksp libs.hiltExtensionsProcessor
    implementation libs.hiltNavigationCompose
    implementation libs.hiltAndroidTesting

    implementation libs.documentFile
    implementation libs.commonsLang

    implementation libs.activityCompose
    implementation libs.composeUi
    implementation libs.composeMaterial
    implementation libs.composeUiTooling
    implementation libs.navigationCompose

    api project(':domain:usecase:cloud')
    api project(':domain:usecase:local')
    api project(':data:local')
    api project(':data:cloud')
    api project(':data:filesystem')
    api project(':data:preferences')
    api project(':presentation:navigation')

    testImplementation libs.junit
    testImplementation libs.mockk
    testImplementation libs.coroutinesTest
    testImplementation libs.androidXCoreTesting
}