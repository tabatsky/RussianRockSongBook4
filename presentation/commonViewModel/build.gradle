plugins {
    id 'com.android.library'
    id 'kotlin-android'
    id 'kotlin-kapt'
    id 'com.google.dagger.hilt.android'
    id 'org.jetbrains.kotlin.plugin.compose'
}

android {
    compileSdk 34

    defaultConfig {
        minSdk 21
        targetSdk 34

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
        consumerProguardFiles "consumer-rules.pro"
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }
    kotlinOptions {
        jvmTarget = '17'
    }
    buildFeatures {
        compose true
    }
    composeOptions {
        kotlinCompilerExtensionVersion versions.composeCompiler
    }
    namespace 'jatx.russianrocksongbook.commonviewmodel'
}

dependencies {

    implementation commonDeps.coreKtx
    implementation commonDeps.coroutines
    implementation commonDeps.lifecycleRuntime
    implementation commonDeps.lifecycleViewmodel

    implementation diDeps.hiltAndroid
    kapt diDeps.hiltCompiler
    implementation diDeps.hiltExtensions
    kapt diDeps.hiltExtensionsProcessor
    implementation diDeps.hiltNavigationCompose
    implementation testDeps.hiltAndroidTesting

    implementation commonDeps.documentFile
    implementation commonDeps.commonsLang

    implementation commonDeps.activityCompose
    implementation commonDeps.composeUi
    implementation commonDeps.composeMaterial
    implementation commonDeps.composeUiTooling
    implementation commonDeps.navigationCompose

    api project(':domain:usecase:cloud')
    api project(':domain:usecase:local')
    api project(':data:local')
    api project(':data:cloud')
    api project(':data:filesystem')
    api project(':data:preferences')
    api project(':presentation:navigation')

    testImplementation testDeps.junit
    testImplementation testDeps.mockk
    testImplementation testDeps.coroutinesTest
    testImplementation testDeps.androidXCoreTesting
}